import{c as l,d as b,e as E,g as f,h as x,i as R,la as _,ma as $,na as m,oa as k,pa as w}from"./chunk-U6OQ5HF5.js";import{a as d,b as I}from"./chunk-ZZCFS5BP.js";var C=d((H,M)=>{function a(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}M.exports=a;a.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};a.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};a.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var i=this._timeouts.shift();if(i===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0};a.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};a.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};a.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};a.prototype.start=a.prototype.try;a.prototype.errors=function(){return this._errors};a.prototype.attempts=function(){return this._attempts};a.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,i=0,r=0;r<this._errors.length;r++){var o=this._errors[r],n=o.message,s=(t[n]||0)+1;t[n]=s,s>=i&&(e=o,i=s)}return e}});var S=d(u=>{var P=C();u.operation=function(t){var e=u.timeouts(t);return new P(e,{forever:t&&(t.forever||t.retries===1/0),unref:t&&t.unref,maxRetryTime:t&&t.maxRetryTime})};u.timeouts=function(t){if(t instanceof Array)return[].concat(t);var e={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in t)e[i]=t[i];if(e.minTimeout>e.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<e.retries;o++)r.push(this.createTimeout(o,e));return t&&t.forever&&!r.length&&r.push(this.createTimeout(o,e)),r.sort(function(n,s){return n-s}),r};u.createTimeout=function(t,e){var i=e.randomize?Math.random()+1:1,r=Math.round(i*Math.max(e.minTimeout,1)*Math.pow(e.factor,t));return r=Math.min(r,e.maxTimeout),r};u.wrap=function(t,e,i){if(e instanceof Array&&(i=e,e=null),!i){i=[];for(var r in t)typeof t[r]=="function"&&i.push(r)}for(var o=0;o<i.length;o++){var n=i[o],s=t[n];t[n]=function(z){var h=u.operation(e),p=Array.prototype.slice.call(arguments,1),N=p.pop();p.push(function(T){h.retry(T)||(T&&(arguments[0]=h.mainError()),N.apply(this,arguments))}),h.attempt(function(){z.apply(t,p)})}.bind(t,s),t[n].options=e}}});var U=d((X,D)=>{D.exports=S()});var A=I(U(),1),W=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"]),F=class extends Error{constructor(e){super();e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}},q=(t,e,i)=>{let r=i.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=r,t},O=t=>W.has(t);async function c(t,e){return new Promise((i,r)=>{e={onFailedAttempt:()=>{},retries:10,...e};let o=A.default.operation(e);o.attempt(async n=>{try{i(await t(n))}catch(s){if(!(s instanceof Error)){r(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof F)o.stop(),r(s.originalError);else if(s instanceof TypeError&&!O(s.message))o.stop(),r(s);else{q(s,n,e);try{await e.onFailedAttempt(s)}catch(v){r(v);return}o.retry(s)||r(o.mainError())}}})})}var y=["https://cdn.jsdelivr.net/npm","https://unpkg.com"],B=(t,e)=>`${y[t]}/esbuild-wasm@${e}/lib/browser.min.js`,J=(t,e)=>`${y[t]}/esbuild-wasm@${e}/esbuild.wasm`;async function Q(){let t=R().version||"latest";console.log("loading esbuild @",t);let e={initialize:l,build:l,formatMessages:l,transform:l,version:"none"};if(!f){w.set(e);return}for(let i=0;i<y.length;++i)try{let r=B(i,t);m.set("Fetching "+r),await c(()=>L(V(r,()=>b(window.esbuild))),{retries:3}),e=window.esbuild,k.set(e.version);let o=J(i,e.version);m.set("Downloading "+o),await c(()=>L(e.initialize({wasmURL:o})),{retries:3}),await e.transform("let a = 1");break}catch{continue}if(e.version==="none")throw new Error("Error: failed to load esbuild-wasm, try refresh the page.");w.set(e),console.log("loaded esbuild @",e.version)}async function L(t){try{return await t}catch(e){throw m.set(String(e)),console.error(e),e}}function V(t,e){return new Promise((i,r)=>{let o=document.createElement("script");o.onload=async()=>{e()&&i();for(let n=0;n<10;++n)await E(100),e()&&i();r(new Error(`Failed to import ${t}.`))},o.onerror=()=>{o.remove(),r()},o.src=t,document.head.append(o)})}(async()=>{try{await Q(),m.set("Ready."),$.set(!1)}catch(t){m.set(String(t)),console.error(t)}})();navigator.serviceWorker?.register("./sw.js").then(t=>console.log("registered sw.js in scope:",t.scope)).catch(t=>console.log("failed to register sw.js:",t));var g=f&&window.matchMedia?matchMedia("(prefers-color-scheme: dark)"):null;if(g){let t=()=>_.set(g.matches?"dark":"light");g.addEventListener("change",t),t()}_.subscribe(t=>{f&&(document.body.dataset.theme=t)});x?import("./editor-RTCUTOYT.js"):import("./editor-RTCUTOYT.js");
//# sourceMappingURL=chunk-UJWCKHSH.js.map
