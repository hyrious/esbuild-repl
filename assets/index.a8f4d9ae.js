!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(s){const n=new URL(e,location),r=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((s,o)=>{const i=new URL(e,n);if(self[t].moduleMap[i])return s(self[t].moduleMap[i]);const a=new Blob([`import * as m from '${i}';`,`${t}.moduleMap['${i}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){o(new Error(`Failed to import: ${e}`)),r(l)},onload(){s(self[t].moduleMap[i]),r(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("assets/");let e;const t={},s=e=>document.querySelector(e);const n="https://cdn.jsdelivr.net/npm/esbuild-wasm",r=e=>`${n}@${e}/esm/browser.js`,o=e=>`${n}@${e}/esbuild.wasm`;let i;const a={async fetchVersion(){const e=(await fetch("https://data.jsdelivr.com/v1/package/npm/esbuild-wasm").then((e=>e.json()))).tags.latest;return localStorage.setItem("esbuild-repl",`${e}:${Date.now()}`),e},async version(){const e=localStorage.getItem("esbuild-repl");if(e){const[t,s]=e.split(":",2);if(Date.now()-+s<6048e5)return t}return this.fetchVersion()},async esbuild(s){i=await function(s,n){if(!n)return s();if(void 0===e){const t=document.createElement("link").relList;e=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(n.map((s=>{if(s in t)return;t[s]=!0;const n=s.endsWith(".css"),r=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${r}`))return;const o=document.createElement("link");return o.rel=n?"stylesheet":e,n||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),n?new Promise(((e,t)=>{o.addEventListener("load",e),o.addEventListener("error",t)})):void 0}))).then((()=>s()))}((()=>__import__(r(s))),void 0),await i.initialize({wasmURL:o(s)})},dashize:e=>e.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())),camelize:e=>e.replace(/-([a-z])/g,(e=>e.substring(1).toUpperCase())),cfg2cli(e){const t=[];for(const s in e){const n=e[s];if(Array.isArray(n))for(const e of n)t.push(`--${this.dashize(s)}:${e}`);else if(n instanceof Object)for(const[e,r]of Object.entries(n))t.push(`--${this.dashize(s)}:${e}=${r}`);else!0===n?t.push(`--${this.dashize(s)}`):t.push(`--${this.dashize(s)}=${n}`)}return t.join(" ")},cli2cfg(e){const t={};for(const s of e.split(/\s+/)){if(!s.startsWith("--"))continue;const e=s.substring(2),n=e.indexOf(":"),r=e.indexOf("=");if(-1===n&&-1===r)t[this.camelize(e)]=!0;else if(-1!==n&&n<r){const s=e.substring(0,n),[r,o]=e.substring(n+1).split("=",2);t[s]||(t[s]={}),t[s][r]=o}else if(-1!==n&&-1===r){const[s,n]=e.split(":",2);t[s]||(t[s]=[]),t[s].push(n)}else{const[s,n]=e.split("=",2),r={true:!0,false:!1}[n]||n;t[s]=r}}return t},showError(e){const t=s("#error");t.style.display="",t.textContent=e},hideError(){s("#error").style.display="none"}};(async function(){const e=await a.version();s("#version").textContent=e,await a.esbuild(e),function(e,t=200){e.classList.add("leave","leave-active"),requestAnimationFrame((()=>{e.classList.remove("leave"),e.classList.add("leave-to")})),setTimeout((()=>e.remove()),t)}(s("#mask")),window.esbuild=i;let t={loader:"tsx"};async function n(){const e=s("#editor").value;try{const n=await(null==i?void 0:i.transform(e,t));n&&(s("#output").value=n.code,a.hideError())}catch(n){a.showError(n.message)}}s("#config").addEventListener("change",(e=>{const s=e.target;t=a.cli2cfg(s.value),s.value=a.cfg2cli(t),n()})),s("#editor").addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=e.target,s=t.value,n=s.substring(0,t.selectionStart),r=t.selectionEnd,o=s.substring(r);t.value=n+"    "+o,t.selectionStart=t.selectionEnd=r+4}})),s("#editor").addEventListener("input",n),n()})().catch((e=>{console.error(e),s("#mask").textContent=(null==e?void 0:e.message)||e}));
//# sourceMappingURL=index.a8f4d9ae.js.map
