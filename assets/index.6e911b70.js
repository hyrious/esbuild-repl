const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function r(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerpolicy&&(n.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?n.credentials="include":s.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(s){if(s.ep)return;s.ep=!0;const n=r(s);fetch(s.href,n)}};E();const z="modulepreload",w={},S="",O=function(t,r){return!r||r.length===0?t():Promise.all(r.map(o=>{if(o=`${S}${o}`,o in w)return;w[o]=!0;const s=o.endsWith(".css"),n=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const i=document.createElement("link");if(i.rel=s?"stylesheet":z,s||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),s)return new Promise((d,a)=>{i.addEventListener("load",d),i.addEventListener("error",a)})})).then(()=>t())},l=e=>document.querySelector(e);function P(e,t=200){e.classList.add("leave","leave-active"),requestAnimationFrame(()=>{e.classList.remove("leave"),e.classList.add("leave-to")}),setTimeout(()=>e.remove(),t)}const j="https://data.jsdelivr.com/v1/package/npm/esbuild-wasm",$="https://cdn.jsdelivr.net/npm/esbuild-wasm",L={browser:e=>`${$}@${e}/esm/browser.js`,wasm:e=>`${$}@${e}/esbuild.wasm`};let m;const u={async fetchVersion(){const t=(await fetch(j).then(r=>r.json())).tags.latest;return localStorage.setItem("esbuild-repl",`${t}:${Date.now()}`),t},async version(){const e=localStorage.getItem("esbuild-repl");if(e){const[t,r]=e.split(":",2);if(Date.now()-+r<86400*1e3)return t}return this.fetchVersion()},async esbuild(e){m=await O(()=>import(L.browser(e)),[]),await m.initialize({wasmURL:L.wasm(e)})},dashize(e){return e.replace(/([A-Z])/g,t=>"-"+t.toLowerCase())},camelize(e){return e.replace(/-([a-z])/g,t=>t.substring(1).toUpperCase())},cfg2cli(e){const t=[];for(const r in e){const o=e[r];if(Array.isArray(o))for(const s of o)t.push(`--${this.dashize(r)}:${s}`);else if(o instanceof Object)for(const[s,n]of Object.entries(o))t.push(`--${this.dashize(r)}:${s}=${n}`);else o===!0?t.push(`--${this.dashize(r)}`):t.push(`--${this.dashize(r)}=${o}`)}return t.join(" ")},cli2cfg(e){var r,o;const t={};for(const s of e.split(/\s+/)){if(!s.startsWith("--"))continue;const n=s.substring(2),i=n.indexOf(":"),d=n.indexOf("=");if(i===-1&&d===-1)t[this.camelize(n)]=!0;else if(i!==-1&&i<d){const a=n.substring(0,i),[f,h]=n.substring(i+1).split("=",2);t[r=this.camelize(a)]||(t[r]={}),t[this.camelize(a)][f]=h}else if(i!==-1&&d===-1){const[a,f]=n.split(":",2);t[o=this.camelize(a)]||(t[o]=[]),t[this.camelize(a)].push(f)}else{const[a,f]=n.split("=",2),h={true:!0,false:!1}[f]||f;t[this.camelize(a)]=h}}return t},loadQuery(){const e=new URLSearchParams(location.search.slice(1)),t=e.get("version"),r=e.get("shareable");let o=null;if(r)try{o=JSON.parse(decodeURIComponent(atob(r)))}catch{}return{version:t,shareable:o}},updateQuery(e,t){const r=new URLSearchParams;r.set("version",e),r.set("shareable",btoa(encodeURIComponent(JSON.stringify(t))));const o=location.origin+location.pathname+"?"+r.toString();history.pushState({path:o},"",o)},showError(e){const t=l("#error");t.style.display="",t.textContent=e},hideError(){const e=l("#error");e.style.display="none"}};(async function(){var a,f,h,y;const e=u.loadQuery();console.log(e),l("#theme").addEventListener("click",()=>{document.body.classList.toggle("light")});const t=e.version||await u.version();l("#version").textContent=t;let r=l("#config"),o=l("#output"),s=l("#editor");((a=e.shareable)==null?void 0:a.config)!=null&&(r.value=u.cfg2cli((f=e.shareable)==null?void 0:f.config)),((h=e.shareable)==null?void 0:h.code)!=null&&(s.value=(y=e.shareable)==null?void 0:y.code,o.value="// initializing..."),await u.esbuild(t),window.esbuild=m,P(l("#mask"));let n=u.cli2cfg(r.value),i=s.value;r.addEventListener("change",()=>{n=u.cli2cfg(r.value),r.value=u.cfg2cli(n),d()}),s.addEventListener("keydown",v=>{if(v.key==="Tab"){v.preventDefault();const c=s,p=c.value,g=p.substring(0,c.selectionStart),b=c.selectionEnd,k=p.substring(b);c.value=g+"    "+k,c.selectionStart=c.selectionEnd=b+4}});async function d(v=!1){i=s.value;try{const c=performance.now(),p=await(m==null?void 0:m.transform(i,n)),g=performance.now()-c;p&&(o.value=p.code,u.hideError(),v||(l("#duration").textContent=g.toFixed(2)+"ms"))}catch(c){u.showError(c.message)}try{u.updateQuery(t,{code:i,config:n})}catch{}}s.addEventListener("input",()=>d(!1)),d(!0)})().catch(e=>{console.error(e),l("#mask").textContent=(e==null?void 0:e.message)||e});navigator.serviceWorker.register("./sw.js").then(e=>console.log("registered sw.js in scope:",e.scope)).catch(e=>console.log("failed to register sw.js:",e));
//# sourceMappingURL=index.6e911b70.js.map
