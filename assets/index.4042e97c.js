let e;const t={},s=e=>document.querySelector(e);const i="https://cdn.jsdelivr.net/npm/esbuild-wasm",n=e=>`${i}@${e}/esm/browser.js`,r=e=>`${i}@${e}/esbuild.wasm`;let o;const a={async fetchVersion(){const e=(await fetch("https://data.jsdelivr.com/v1/package/npm/esbuild-wasm").then((e=>e.json()))).tags.latest;return localStorage.setItem("esbuild-repl",`${e}:${Date.now()}`),e},async version(){const e=localStorage.getItem("esbuild-repl");if(e){const[t,s]=e.split(":",2);if(Date.now()-+s<6048e5)return t}return this.fetchVersion()},async esbuild(s){o=await function(s,i){if(!i)return s();if(void 0===e){const t=document.createElement("link").relList;e=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(i.map((s=>{if(s in t)return;t[s]=!0;const i=s.endsWith(".css"),n=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const r=document.createElement("link");return r.rel=i?"stylesheet":e,i||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),i?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>s()))}((()=>import(n(s))),void 0),await o.initialize({wasmURL:r(s)})},dashize:e=>e.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())),camelize:e=>e.replace(/-([a-z])/g,(e=>e.substring(1).toUpperCase())),cfg2cli(e){const t=[];for(const s in e){const i=e[s];if(Array.isArray(i))for(const e of i)t.push(`--${this.dashize(s)}:${e}`);else if(i instanceof Object)for(const[e,n]of Object.entries(i))t.push(`--${this.dashize(s)}:${e}=${n}`);else!0===i?t.push(`--${this.dashize(s)}`):t.push(`--${this.dashize(s)}=${i}`)}return t.join(" ")},cli2cfg(e){var t,s;const i={};for(const n of e.split(/\s+/)){if(!n.startsWith("--"))continue;const e=n.substring(2),r=e.indexOf(":"),o=e.indexOf("=");if(-1===r&&-1===o)i[this.camelize(e)]=!0;else if(-1!==r&&r<o){const s=e.substring(0,r),[n,o]=e.substring(r+1).split("=",2);i[t=this.camelize(s)]||(i[t]={}),i[this.camelize(s)][n]=o}else if(-1!==r&&-1===o){const[t,n]=e.split(":",2);i[s=this.camelize(t)]||(i[s]=[]),i[this.camelize(t)].push(n)}else{const[t,s]=e.split("=",2),n={true:!0,false:!1}[s]||s;i[this.camelize(t)]=n}}return i},showError(e){const t=s("#error");t.style.display="",t.textContent=e},hideError(){s("#error").style.display="none"}};(async function(){const e=await a.version();s("#version").textContent=e,await a.esbuild(e),function(e,t=200){e.classList.add("leave","leave-active"),requestAnimationFrame((()=>{e.classList.remove("leave"),e.classList.add("leave-to")})),setTimeout((()=>e.remove()),t)}(s("#mask")),window.esbuild=o;let t={loader:"tsx"};async function i(){const e=s("#editor").value;try{const i=await(null==o?void 0:o.transform(e,t));i&&(s("#output").value=i.code,a.hideError())}catch(i){a.showError(i.message)}}s("#config").addEventListener("change",(e=>{const s=e.target;t=a.cli2cfg(s.value),s.value=a.cfg2cli(t),i()})),s("#editor").addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=e.target,s=t.value,i=s.substring(0,t.selectionStart),n=t.selectionEnd,r=s.substring(n);t.value=i+"    "+r,t.selectionStart=t.selectionEnd=n+4}})),s("#editor").addEventListener("input",i),i()})().catch((e=>{console.error(e),s("#mask").textContent=(null==e?void 0:e.message)||e}));
//# sourceMappingURL=index.4042e97c.js.map
