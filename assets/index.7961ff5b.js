let e;const t={},s=e=>document.querySelector(e);const n="https://cdn.jsdelivr.net/npm/esbuild-wasm",i=e=>`${n}@${e}/esm/browser.js`,r=e=>`${n}@${e}/esbuild.wasm`;let o;const a={async fetchVersion(){const e=(await fetch("https://data.jsdelivr.com/v1/package/npm/esbuild-wasm").then((e=>e.json()))).tags.latest;return localStorage.setItem("esbuild-repl",`${e}:${Date.now()}`),e},async version(){const e=localStorage.getItem("esbuild-repl");if(e){const[t,s]=e.split(":",2);if(Date.now()-+s<6048e5)return t}return this.fetchVersion()},async esbuild(s){o=await function(s,n){if(!n)return s();if(void 0===e){const t=document.createElement("link").relList;e=t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(n.map((s=>{if(s in t)return;t[s]=!0;const n=s.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${i}`))return;const r=document.createElement("link");return r.rel=n?"stylesheet":e,n||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),n?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>s()))}((()=>import(i(s))),void 0),await o.initialize({wasmURL:r(s)})},dashize:e=>e.replace(/([A-Z])/g,(e=>"-"+e.toLowerCase())),camelize:e=>e.replace(/-([a-z])/g,(e=>e.substring(1).toUpperCase())),cfg2cli(e){const t=[];for(const s in e){const n=e[s];if(Array.isArray(n))for(const e of n)t.push(`--${this.dashize(s)}:${e}`);else if(n instanceof Object)for(const[e,i]of Object.entries(n))t.push(`--${this.dashize(s)}:${e}=${i}`);else!0===n?t.push(`--${this.dashize(s)}`):t.push(`--${this.dashize(s)}=${n}`)}return t.join(" ")},cli2cfg(e){var t,s;const n={};for(const i of e.split(/\s+/)){if(!i.startsWith("--"))continue;const e=i.substring(2),r=e.indexOf(":"),o=e.indexOf("=");if(-1===r&&-1===o)n[this.camelize(e)]=!0;else if(-1!==r&&r<o){const s=e.substring(0,r),[i,o]=e.substring(r+1).split("=",2);n[t=this.camelize(s)]||(n[t]={}),n[this.camelize(s)][i]=o}else if(-1!==r&&-1===o){const[t,i]=e.split(":",2);n[s=this.camelize(t)]||(n[s]=[]),n[this.camelize(t)].push(i)}else{const[t,s]=e.split("=",2),i={true:!0,false:!1}[s]||s;n[this.camelize(t)]=i}}return n},showError(e){const t=s("#error");t.style.display="",t.textContent=e},hideError(){s("#error").style.display="none"}};(async function(){s("#theme").addEventListener("click",(()=>{document.body.classList.toggle("light")}));const e=await a.version();s("#version").textContent=e,await a.esbuild(e),function(e,t=200){e.classList.add("leave","leave-active"),requestAnimationFrame((()=>{e.classList.remove("leave"),e.classList.add("leave-to")})),setTimeout((()=>e.remove()),t)}(s("#mask")),window.esbuild=o;let t={loader:"tsx"};async function n(e=!1){const n=s("#editor").value;try{const i=performance.now(),r=await(null==o?void 0:o.transform(n,t)),c=performance.now()-i;r&&(s("#output").value=r.code,a.hideError(),e||(s("#duration").textContent=c.toFixed(2)+"ms"))}catch(i){a.showError(i.message)}}s("#config").addEventListener("change",(e=>{const s=e.target;t=a.cli2cfg(s.value),s.value=a.cfg2cli(t),n()})),s("#editor").addEventListener("keydown",(e=>{if("Tab"===e.key){e.preventDefault();const t=e.target,s=t.value,n=s.substring(0,t.selectionStart),i=t.selectionEnd,r=s.substring(i);t.value=n+"    "+r,t.selectionStart=t.selectionEnd=i+4}})),s("#editor").addEventListener("input",(()=>n(!1))),n(!0)})().catch((e=>{console.error(e),s("#mask").textContent=(null==e?void 0:e.message)||e}));
//# sourceMappingURL=index.7961ff5b.js.map
