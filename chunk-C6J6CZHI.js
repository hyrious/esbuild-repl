import{c as l,d as b,e as E,g as f,i as x,la as _,ma as R,na as m,oa as $,pa as y}from"./chunk-KN36EHBN.js";import{a as d,b as N}from"./chunk-ZZCFS5BP.js";var M=d((G,k)=>{function a(e,t){typeof t=="boolean"&&(t={forever:t}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=t||{},this._maxRetryTime=t&&t.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}k.exports=a;a.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};a.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};a.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var t=new Date().getTime();if(e&&t-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var i=this._timeouts.shift();if(i===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),i=this._cachedTimeouts.slice(-1);else return!1;var r=this;return this._timer=setTimeout(function(){r._attempts++,r._operationTimeoutCb&&(r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout),r._options.unref&&r._timeout.unref()),r._fn(r._attempts)},i),this._options.unref&&this._timer.unref(),!0};a.prototype.attempt=function(e,t){this._fn=e,t&&(t.timeout&&(this._operationTimeout=t.timeout),t.cb&&(this._operationTimeoutCb=t.cb));var i=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){i._operationTimeoutCb()},i._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};a.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)};a.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)};a.prototype.start=a.prototype.try;a.prototype.errors=function(){return this._errors};a.prototype.attempts=function(){return this._attempts};a.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},t=null,i=0,r=0;r<this._errors.length;r++){var o=this._errors[r],n=o.message,s=(e[n]||0)+1;e[n]=s,s>=i&&(t=o,i=s)}return t}});var C=d(u=>{var I=M();u.operation=function(e){var t=u.timeouts(e);return new I(t,{forever:e&&(e.forever||e.retries===1/0),unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})};u.timeouts=function(e){if(e instanceof Array)return[].concat(e);var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in e)t[i]=e[i];if(t.minTimeout>t.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var r=[],o=0;o<t.retries;o++)r.push(this.createTimeout(o,t));return e&&e.forever&&!r.length&&r.push(this.createTimeout(o,t)),r.sort(function(n,s){return n-s}),r};u.createTimeout=function(e,t){var i=t.randomize?Math.random()+1:1,r=Math.round(i*Math.max(t.minTimeout,1)*Math.pow(t.factor,e));return r=Math.min(r,t.maxTimeout),r};u.wrap=function(e,t,i){if(t instanceof Array&&(i=t,t=null),!i){i=[];for(var r in e)typeof e[r]=="function"&&i.push(r)}for(var o=0;o<i.length;o++){var n=i[o],s=e[n];e[n]=function(L){var h=u.operation(t),p=Array.prototype.slice.call(arguments,1),z=p.pop();p.push(function(g){h.retry(g)||(g&&(arguments[0]=h.mainError()),z.apply(this,arguments))}),h.attempt(function(){L.apply(e,p)})}.bind(e,s),e[n].options=t}}});var U=d((K,S)=>{S.exports=C()});var A=N(U(),1),P=new Set(["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"]),D=class extends Error{constructor(t){super();t instanceof Error?(this.originalError=t,{message:t}=t):(this.originalError=new Error(t),this.originalError.stack=this.stack),this.name="AbortError",this.message=t}},q=(e,t,i)=>{let r=i.retries-(t-1);return e.attemptNumber=t,e.retriesLeft=r,e},O=e=>P.has(e);async function c(e,t){return new Promise((i,r)=>{t={onFailedAttempt:()=>{},retries:10,...t};let o=A.default.operation(t);o.attempt(async n=>{try{i(await e(n))}catch(s){if(!(s instanceof Error)){r(new TypeError(`Non-error was thrown: "${s}". You should only throw errors.`));return}if(s instanceof D)o.stop(),r(s.originalError);else if(s instanceof TypeError&&!O(s.message))o.stop(),r(s);else{q(s,n,t);try{await t.onFailedAttempt(s)}catch(T){r(T);return}o.retry(s)||r(o.mainError())}}})})}var w=["https://cdn.jsdelivr.net/npm","https://unpkg.com"],B=(e,t)=>`${w[e]}/esbuild-wasm@${t}/lib/browser.min.js`,J=(e,t)=>`${w[e]}/esbuild-wasm@${t}/esbuild.wasm`;async function Q(){let e=x().version||"latest";console.log("loading esbuild @",e);let t={initialize:l,build:l,formatMessages:l,transform:l,version:"none"};if(!f){y.set(t);return}for(let i=0;i<w.length;++i)try{let r=B(i,e);m.set("Fetching "+r),await c(()=>F(W(r,()=>b(window.esbuild))),{retries:3}),t=window.esbuild,$.set(t.version);let o=J(i,t.version);m.set("Downloading "+o),await c(()=>F(t.initialize({wasmURL:o})),{retries:3}),await t.transform("let a = 1");break}catch{continue}if(t.version==="none")throw new Error("Error: failed to load esbuild-wasm, try refresh the page.");y.set(t),console.log("loaded esbuild @",t.version)}async function F(e){try{return await e}catch(t){throw m.set(String(t)),console.error(t),t}}function W(e,t){return new Promise((i,r)=>{let o=document.createElement("script");o.onload=async()=>{t()&&i();for(let n=0;n<10;++n)await E(100),t()&&i();r(new Error(`Failed to import ${e}.`))},o.onerror=()=>{o.remove(),r()},o.src=e,document.head.append(o)})}(async()=>{try{await Q(),m.set("Ready."),R.set(!1)}catch(e){m.set(String(e)),console.error(e)}})();var v=f&&window.matchMedia?matchMedia("(prefers-color-scheme: dark)"):null;if(v){let e=()=>_.set(v.matches?"dark":"light");v.addEventListener("change",e),e()}_.subscribe(e=>{f&&(document.body.dataset.theme=e)});
//# sourceMappingURL=chunk-C6J6CZHI.js.map
